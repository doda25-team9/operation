{
  "uid": "sms-ab-dashboard",
  "title": "SMS Checker - A/B Experiment Results",
  "schemaVersion": 39,
  "timezone": "browser",
  "refresh": "5s",
  "templating": {
    "list": [
      {
        "name": "interval",
        "type": "interval",
        "query": "1m,5m,10m,30m,1h",
        "current": { "selected": true, "text": "1m", "value": "1m" },
        "label": "Interval",
        "hide": 0
      }
    ]
  },
  "panels": [
        {
      "type": "stat",
      "title": "Spam Detection Rate (%)",
      "description": "Percentage of traffic identified as SPAM for version A",
      "id": 0,
      "gridPos": { "x": 0, "y": 0, "w": 6, "h": 12 },
      "targets": [
        {
          "expr": "sum(increase(predictions_result_total{result=\"spam\", version=\"v1\"}[$interval])) / sum(increase(predictions_result_total{version=\"v1\"}[$interval])) * 100",
          "legendFormat": "Spam Rate",
          "refId": "A"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "unit": "percent"
      }
    },
    {
      "type": "timeseries",
      "title": "Prediction trends over time for version A",
      "id": 1,
      "gridPos": { "x": 6, "y": 0, "w": 18, "h": 12 },
      "targets": [
        {
          "expr": "sum by (result) (increase(predictions_result_total{version=\"v1\"}[$interval]))",
          "legendFormat": "{{result}}",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Spam Detection Rate (%)",
      "description": "Percentage of traffic identified as SPAM for version B",
      "id": 2,
      "gridPos": { "x": 0, "y": 12, "w": 6, "h": 12 },
      "targets": [
        {
          "expr": "sum(increase(predictions_result_total{result=\"spam\", version=\"v2\"}[$interval])) / sum(increase(predictions_result_total{version=\"v2\"}[$interval])) * 100",
          "legendFormat": "Spam Rate",
          "refId": "A"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "unit": "percent"
      }
    },
    {
      "type": "timeseries",
      "title": "Prediction trends over time for version B",
      "id": 3,
      "gridPos": { "x": 6, "y": 12, "w": 18, "h": 12 },
      "targets": [
        {
          "expr": "increase(predictions_result_total{version=\"v2\"}[$interval])",
          "legendFormat": "{{result}}",
          "refId": "A"
        }
      ]
    }
  ]
}