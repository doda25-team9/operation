app:
  name: app
  replicas: 1
  
  image:
    repository: ghcr.io/doda25-team9/app
    tag: latest
    pullPolicy: Always
  
  service:
    name: app-service
    port: 8080
    type: ClusterIP
  
  labels:
    app: sms-checker
    component: app

modelService:
  name: model
  replicas: 1
  
  image:
    repository: ghcr.io/doda25-team9/model-service
    tag: latest
    pullPolicy: Always
  
  service:
    name: model-service
    port: 8081
    type: ClusterIP
  
  labels:
    app: model-service
  
  volume:
    hostPath: /mnt/shared

ingress:
  enabled: true
  name: app-ingress
  className: nginx
  host: sms-checker.local

configMap:
  name: env-config-map

secret: 
  name: smtp-credentials 
  smtpUserKey: SMTP_USER 
  smtpPassKey: SMTP_PASS

alertmanager:
  smtp:
    secretName: alertmanager-smtp-secret 
    userKey: SMTP_USER 
    passwordKey: SMTP_PASS
  recipient: "PLACEHOLDER_REPLACE_WITH_YOUR_EMAIL"

kube-prometheus-stack:
  fullnameOverride: "prometheus"

  prometheus:
    enabled: true
    prometheusSpec:
      serviceMonitorSelector:
        matchLabels:
          release: prometheus
      alertingEndpoints:
      - name: prometheus-alertmanager
        namespace: default
        port: http-web
        scheme: http
  
  defaultRules:
    create: false  # Disable all default rules      
  
  alertmanager:
    enabled: true
    alertmanagerSpec:
      useExistingSecret: true
      secrets: 
        - alertmanager-smtp-secret
      configSecret: alertmanager-custom-config

  grafana:
    enabled: true
    admin:
      existingSecret: grafana-admin-secret
      userKey: admin-user
      passwordKey: admin-password
  
istio:
  enabled: true
  host: sms-checker.local
  stableHost: stable.sms-checker.local
  canaryHost: canary.sms-checker.local
  
  gateway:
    name: sms-gateway
    ingressGatewaySelector: ingressgateway
  
  trafficSplit:
    stable: 90
    canary: 10

  stickySession:
    enabled: true
    cookieName: user-session
    ttl: 3600

versions:
  v1:
    enabled: true
    replicas: 1
    appImageTag: "0.0.9-SNAPSHOT"
    modelImageTag: "0.5.0"
    modelVersion: "v0.1.0"
  
  v2:
    enabled: true
    replicas: 1
    appImageTag: "0.0.10"
    modelImageTag: "0.5.3"
    modelVersion: "v0.2.0"

shadowLaunch:
  enabled: true
  replicas: 1
  modelImageTag: latest
  modelVersion: "v0.1.0"
  mirrorPercentage: 100.0